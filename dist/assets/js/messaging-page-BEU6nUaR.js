function e({className:e,...a}){return m.jsx(u,{"data-slot":"avatar",className:P("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...a})}function a({className:e,...a}){return m.jsx(h,{"data-slot":"avatar-image",className:P("aspect-square size-full",e),...a})}function t({className:e,...a}){return m.jsx(g,{"data-slot":"avatar-fallback",className:P("bg-muted flex size-full items-center justify-center rounded-full",e),...a})}function s({className:e,children:a,...t}){return m.jsxs(y,{"data-slot":"scroll-area",className:P("relative",e),...t,children:[m.jsx(v,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:a}),m.jsx(r,{}),m.jsx(p,{})]})}function r({className:e,orientation:a="vertical",...t}){return m.jsx(f,{"data-slot":"scroll-area-scrollbar",orientation:a,className:P("flex touch-none p-px transition-colors select-none","vertical"===a&&"h-full w-2.5 border-l border-l-transparent","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent",e),...t,children:m.jsx(w,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function n({conversation:a,isSelected:s=!1,currentUserId:r,onClick:n,onMenuClick:i}){const l=a.participants.filter(e=>e.userId!==r),c=l[0];return m.jsxs("div",{className:ee("flex items-center gap-3 p-3 cursor-pointer transition-all duration-200 hover:bg-gray-50",s&&"bg-blue-50 border-l-4 border-blue-500"),onClick:n,children:[m.jsxs("div",{className:"relative",children:[m.jsx(e,{className:"h-12 w-12",children:m.jsx(t,{className:"bg-blue-100 text-blue-600 font-semibold text-lg",children:"group"===a.type?(a.name||c?.userName||"G").charAt(0).toUpperCase():c?c.userName.charAt(0).toUpperCase():"?"})}),"direct"===a.type&&l.some(e=>e.isOnline)&&m.jsx("div",{className:"absolute -bottom-1 -right-1 h-4 w-4 bg-green-500 border-2 border-white rounded-full"})]}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1",children:[m.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:"group"===a.type&&a.name?a.name:c?c.userName:"KonuÅŸma"}),m.jsxs("div",{className:"flex items-center gap-2",children:[a.lastMessageAt&&m.jsx("span",{className:"text-xs text-gray-500 font-medium",children:(()=>{if(!a.lastMessageAt)return"";const e=new Date,t=new Date(a.lastMessageAt),s=(e.getTime()-t.getTime())/36e5;return s<1||s<24?t.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):s<168?t.toLocaleDateString("tr-TR",{weekday:"short"}):t.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit"})})()}),i&&m.jsx(ae,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-gray-400 hover:text-gray-600",onClick:e=>{e.stopPropagation(),i(a)},children:m.jsx(b,{className:"h-4 w-4"})})]})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-sm text-gray-600 truncate flex-1",children:(()=>{if(!a.lastMessage)return"HenÃ¼z mesaj yok";const e=a.lastMessage;switch(e.type){case"text":return e.content||"Mesaj";case"file":return"ðŸ“Ž Dosya";case"voice":return"ðŸŽ¤ Sesli mesaj";case"system":return e.content||"Sistem mesajÄ±";default:return"Mesaj"}})()}),m.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[a.unreadCount>0&&m.jsx(te,{variant:"destructive",className:"h-5 w-5 p-0 text-xs flex items-center justify-center bg-red-500 text-white rounded-full",children:a.unreadCount>99?"99+":a.unreadCount}),a.lastMessage&&a.lastMessage.senderId===r&&(!a.lastMessage||a.lastMessage.senderId===r||a.lastMessage.readBy.some(e=>e.userId===r))&&m.jsx(N,{className:"h-4 w-4 text-blue-500"})]})]})]})]})}function i({conversations:e,selectedConversationId:a,loading:t=!1,onConversationSelect:r,onNewConversation:i,onConversationMenuClick:l,className:c}){const{user:o}=J(),[d,u]=x.useState(""),h=x.useMemo(()=>{if(!d.trim())return e;const a=d.toLowerCase();return e.filter(e=>!!e.name?.toLowerCase().includes(a)||!!e.participants.filter(e=>e.userId!==o?.id).map(e=>e.userName.toLowerCase()).some(e=>e.includes(a))||!!e.lastMessage?.content?.toLowerCase().includes(a))},[e,d,o?.id]),g=x.useMemo(()=>e.reduce((e,a)=>e+a.unreadCount,0),[e]),y=x.useMemo(()=>({direct:h.filter(e=>"direct"===e.type),groups:h.filter(e=>"group"===e.type)}),[h]);return o?m.jsxs("div",{className:ee("flex flex-col h-full",c),children:[m.jsxs("div",{className:"p-4 border-b bg-white",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Mesajlar"}),m.jsxs("div",{className:"flex items-center gap-2",children:[g>0&&m.jsx(te,{variant:"destructive",className:"bg-red-500 text-white",children:g}),m.jsx(ae,{onClick:i,size:"sm",className:"h-8 w-8 p-0 bg-blue-600 hover:bg-blue-700 text-white rounded-full",children:m.jsx(D,{className:"h-4 w-4"})})]})]}),m.jsxs("div",{className:"relative",children:[m.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),m.jsx(se,{placeholder:"KiÅŸi veya konuÅŸma ara...",value:d,onChange:e=>{u(e.target.value)},className:"pl-10 bg-gray-50 border-gray-200 focus:bg-white focus:border-blue-500 rounded-full"})]})]}),m.jsx(s,{className:"flex-1",children:t?m.jsx("div",{className:"flex items-center justify-center h-32",children:m.jsxs("div",{className:"text-center text-gray-500",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),m.jsx("p",{children:"KonuÅŸmalar yÃ¼kleniyor..."})]})}):0===h.length?m.jsx("div",{className:"flex items-center justify-center h-32",children:m.jsxs("div",{className:"text-center text-gray-500",children:[m.jsx(k,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),m.jsx("p",{children:d?"Arama sonucu bulunamadÄ±":"HenÃ¼z konuÅŸma yok"}),!d&&m.jsx("p",{className:"text-sm mt-1",children:"Yeni bir konuÅŸma baÅŸlatÄ±n"})]})}):m.jsxs("div",{className:"p-2",children:[y.direct.length>0&&m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2 px-3",children:"DoÄŸrudan Mesajlar"}),m.jsx("div",{className:"space-y-1",children:y.direct.map(e=>m.jsx(n,{conversation:e,isSelected:e.id===a,currentUserId:o.id,onClick:()=>{r(e.id)},onMenuClick:l},e.id))})]}),y.groups.length>0&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2 px-3",children:"Gruplar"}),m.jsx("div",{className:"space-y-1",children:y.groups.map(e=>m.jsx(n,{conversation:e,isSelected:e.id===a,currentUserId:o.id,onClick:()=>{r(e.id)},onMenuClick:l},e.id))})]})]})}),m.jsx("div",{className:"p-3 border-t bg-gray-50",children:m.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[m.jsxs("span",{children:[h.length," konuÅŸma"]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),m.jsx("span",{children:"Ã‡evrimiÃ§i"})]})]})})]}):m.jsx("div",{className:ee("flex items-center justify-center h-full",c),children:m.jsxs("div",{className:"text-center text-gray-500",children:[m.jsx(k,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),m.jsx("p",{children:"GiriÅŸ yapmanÄ±z gerekiyor"})]})})}function l({users:e,className:a}){return 0===e.length?null:m.jsxs("div",{className:ee("flex items-center gap-2 px-4 py-2",a),children:[m.jsx("div",{className:"flex items-center gap-1",children:m.jsxs("div",{className:"flex space-x-1",children:[m.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),m.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),m.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}),m.jsx("span",{className:"text-sm text-gray-500 italic",children:1===e.length?`${e[0]} yazÄ±yor...`:2===e.length?`${e[0]} ve ${e[1]} yazÄ±yor...`:`${e.length} kiÅŸi yazÄ±yor...`})]})}function c({messages:e,currentUserId:a,loading:t=!1,hasMoreMessages:r=!1,typingUsers:n=[],onLoadMore:i,onReply:c,onDelete:o,onDownloadAttachment:d,className:u}){const h=x.useRef(null),g=x.useRef(null),[y,v]=x.useState(!0),[p,f]=x.useState(!1);x.useEffect(()=>{y&&g.current&&g.current.scrollIntoView({behavior:"smooth"})},[e,y]);const w=x.useCallback(e=>{const{scrollTop:a,scrollHeight:t,clientHeight:s}=e.currentTarget;v(t-a-s<100)},[]),b=x.useCallback(async()=>{if(r&&!p&&i){f(!0);try{await i()}finally{f(!1)}}},[r,p,i]),N=x.useCallback(()=>{g.current&&(g.current.scrollIntoView({behavior:"smooth"}),v(!0))},[]),k=x.useMemo(()=>{const a=[];return e.forEach((t,s)=>{const r=s>0?e[s-1]:null,n=!r||r.senderId!==t.senderId||new Date(t.createdAt).getTime()-new Date(r.createdAt).getTime()>3e5;a.length>0&&a[a.length-1]?.senderId===t.senderId?a[a.length-1]?.messages.push(t):a.push({senderId:t.senderId,messages:[t],showAvatar:n})}),a},[e]);return t&&0===e.length?m.jsx("div",{className:ee("flex items-center justify-center h-full",u),children:m.jsxs("div",{className:"text-center text-gray-500",children:[m.jsx(M,{className:"h-8 w-8 animate-spin mx-auto mb-2"}),m.jsx("p",{children:"Mesajlar yÃ¼kleniyor..."})]})}):m.jsxs("div",{className:ee("flex flex-col h-full",u),children:[m.jsx(s,{ref:h,className:"flex-1 px-4",onScrollCapture:w,children:m.jsxs("div",{className:"py-4",children:[r&&m.jsx("div",{className:"flex justify-center mb-4",children:m.jsx(ae,{variant:"outline",size:"sm",onClick:b,disabled:p,className:"flex items-center gap-2",children:p?m.jsxs(m.Fragment,{children:[m.jsx(M,{className:"h-4 w-4 animate-spin"}),"YÃ¼kleniyor..."]}):"Daha fazla mesaj yÃ¼kle"})}),k.map((e,a)=>m.jsx("div",{className:"mb-4",children:e.messages.map((a,t)=>{const s="current-user"===a.senderId;return t===e.messages.length-1,m.jsx("div",{className:`flex ${s?"justify-end":"justify-start"} mb-1`,children:m.jsxs("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-2xl shadow-sm "+(s?"bg-blue-500 text-white rounded-br-md":"bg-white text-gray-900 rounded-bl-md border border-gray-200"),children:[m.jsx("p",{className:"text-sm leading-relaxed",children:a.content}),m.jsx("p",{className:"text-xs mt-1 "+(s?"text-blue-100":"text-gray-500"),children:new Date(a.createdAt).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})})]})},a.id)})},`group-${a}`)),n.length>0&&m.jsx("div",{className:"mb-4",children:m.jsx(l,{users:n})}),m.jsx("div",{ref:g})]})}),!y&&m.jsx("div",{className:"absolute bottom-20 right-6",children:m.jsx(ae,{onClick:N,size:"sm",className:"h-10 w-10 rounded-full shadow-lg",children:m.jsx(C,{className:"h-4 w-4"})})})]})}function o({onRecordingComplete:e,onCancel:a,className:t}){const[s,r]=x.useState(!1),[n,i]=x.useState(null),{isRecording:l,duration:c,audioBlob:o,error:d,startRecording:u,stopRecording:h,cancelRecording:g,clearRecording:y,formatDuration:v,getAudioFileSize:p,isRecordingSupported:f}=function(e={}){const{maxDuration:a=300,audioBitsPerSecond:t=128e3,mimeType:s="audio/webm;codecs=opus",onRecordingComplete:r,onError:n}=e,[i,l]=x.useState(!1),[c,o]=x.useState(0),[d,m]=x.useState(null),[u,h]=x.useState(null),g=x.useRef(null),y=x.useRef(null),v=x.useRef([]),p=x.useRef(null),f=x.useRef(0),w=x.useCallback(()=>"undefined"!=typeof MediaRecorder&&MediaRecorder.isTypeSupported(s),[s]),b=x.useCallback(async()=>{try{const e={audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:44100}},a=await navigator.mediaDevices.getUserMedia(e);return H.info("Microphone access granted"),a}catch(e){const a=this.getUserMediaErrorMessage(e);throw H.error("Failed to access microphone",{error:e}),new Error(a)}},[]),N=x.useCallback(async()=>{try{if(h(null),m(null),o(0),v.current=[],!w())throw new Error("TarayÄ±cÄ±nÄ±z ses kaydÄ±nÄ± desteklemiyor. LÃ¼tfen gÃ¼ncel bir tarayÄ±cÄ± kullanÄ±n.");const e=await b();y.current=e;const i=new MediaRecorder(e,{mimeType:s,audioBitsPerSecond:t});g.current=i,i.ondataavailable=e=>{e.data.size>0&&v.current.push(e.data)},i.onstop=()=>{const e=new Blob(v.current,{type:s});m(e),r?.(e),H.info("Voice recording completed",{duration:c,size:e.size,type:e.type})},i.onerror=e=>{const a="Ses kaydÄ± sÄ±rasÄ±nda hata oluÅŸtu.";h(a),n?.(a),H.error("MediaRecorder error",e)},i.start(1e3),l(!0),f.current=Date.now(),p.current=setInterval(()=>{const e=Math.floor((Date.now()-f.current)/1e3);o(e),e>=a&&k()},1e3),H.info("Voice recording started")}catch(e){const a=e instanceof Error?e.message:"Ses kaydÄ± baÅŸlatÄ±lamadÄ±.";h(a),n?.(a),H.error("Failed to start recording",e)}},[w,b,s,t,a,r,n]),k=x.useCallback(()=>{try{g.current&&i&&(g.current.stop(),l(!1),p.current&&(clearInterval(p.current),p.current=null),y.current&&(y.current.getTracks().forEach(e=>{e.stop()}),y.current=null),H.info("Voice recording stopped"))}catch(e){const a="Ses kaydÄ± durdurulamadÄ±.";h(a),n?.(a),H.error("Failed to stop recording",e)}},[i]),D=x.useCallback(()=>{try{g.current&&i&&(g.current.stop(),l(!1),p.current&&(clearInterval(p.current),p.current=null),y.current&&(y.current.getTracks().forEach(e=>{e.stop()}),y.current=null),m(null),o(0),v.current=[],H.info("Voice recording cancelled"))}catch(e){H.error("Failed to cancel recording",e)}},[i]),z=x.useCallback(()=>{m(null),o(0),v.current=[],h(null),H.info("Voice recording cleared")},[]),M=x.useCallback(e=>{const a=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},[]),C=x.useCallback(e=>{const a=e.size;if(0===a)return"0 Bytes";const t=Math.floor(Math.log(a)/Math.log(1024));return`${parseFloat((a/Math.pow(1024,t)).toFixed(2))} ${["Bytes","KB","MB","GB"][t]}`},[]),j=x.useCallback(()=>"undefined"!=typeof MediaRecorder&&"undefined"!=typeof navigator&&void 0!==navigator.mediaDevices?.getUserMedia&&w(),[w]);return x.useEffect(()=>()=>{i&&k(),y.current&&y.current.getTracks().forEach(e=>{e.stop()}),p.current&&clearInterval(p.current)},[i,k]),{isRecording:i,duration:c,audioBlob:d,error:u,startRecording:N,stopRecording:k,cancelRecording:D,clearRecording:z,formatDuration:M,getAudioFileSize:C,isRecordingSupported:j(),maxDuration:a}}({maxDuration:300,onRecordingComplete:e=>{e&&w(e)},onError:e=>{}}),w=async e=>{try{n&&(n.pause(),i(null),r(!1));const a=new Audio;a.src=URL.createObjectURL(e),a.onplay=()=>{r(!0)},a.onpause=()=>{r(!1)},a.onended=()=>{r(!1),i(null)},i(a),await a.play()}catch(a){}},b=()=>{n&&(n.pause(),i(null)),y(),a()},N=()=>{l?g():o&&(y(),n&&(n.pause(),i(null)))};return f?d?m.jsxs("div",{className:ee("p-4 bg-red-50 border border-red-200 rounded-lg",t),children:[m.jsx("p",{className:"text-red-600 text-sm mb-2",children:d}),m.jsx("div",{className:"flex gap-2",children:m.jsx(ae,{variant:"outline",size:"sm",onClick:b,children:"Kapat"})})]}):m.jsx("div",{className:ee("p-4 bg-gray-50 border border-gray-200 rounded-lg",t),children:l?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-sm font-medium text-gray-900",children:"KayÄ±t yapÄ±lÄ±yor..."}),m.jsx("span",{className:"text-sm text-gray-500 ml-auto",children:v(c)})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(ce,{value:c/300*100,className:"h-2"}),m.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Maksimum 5 dakika"})]}),m.jsxs("div",{className:"flex justify-center gap-4",children:[m.jsxs(ae,{variant:"outline",size:"sm",onClick:N,className:"flex items-center gap-2",children:[m.jsx(j,{className:"h-4 w-4"}),"Ä°ptal"]}),m.jsxs(ae,{onClick:h,size:"sm",className:"flex items-center gap-2 bg-red-500 hover:bg-red-600",children:[m.jsx(A,{className:"h-4 w-4"}),"Durdur"]})]})]}):o?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),m.jsx("span",{className:"text-sm font-medium text-gray-900",children:"KayÄ±t tamamlandÄ±"}),m.jsx("span",{className:"text-sm text-gray-500 ml-auto",children:v(c)})]}),m.jsxs("div",{className:"flex items-center justify-center gap-4",children:[m.jsxs(ae,{variant:"outline",size:"sm",onClick:async()=>{if(o)try{n&&!n.paused?(n.pause(),r(!1)):n?(await n.play(),r(!0)):await w(o)}catch(e){}},className:"flex items-center gap-2",children:[s?m.jsx(I,{className:"h-4 w-4"}):m.jsx(_,{className:"h-4 w-4"}),s?"Duraklat":"Oynat"]}),m.jsx("div",{className:"text-xs text-gray-500",children:p(o)})]}),m.jsxs("div",{className:"flex justify-center gap-4",children:[m.jsxs(ae,{variant:"outline",size:"sm",onClick:N,className:"flex items-center gap-2",children:[m.jsx(j,{className:"h-4 w-4"}),"Sil"]}),m.jsxs(ae,{onClick:()=>{o&&e(o)},size:"sm",className:"flex items-center gap-2",children:[m.jsx(E,{className:"h-4 w-4"}),"GÃ¶nder"]})]})]}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"text-center",children:[m.jsx(R,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Sesli mesaj kaydetmek iÃ§in baÅŸlat butonuna basÄ±n"})]}),m.jsxs("div",{className:"flex justify-center gap-4",children:[m.jsxs(ae,{variant:"outline",size:"sm",onClick:b,className:"flex items-center gap-2",children:[m.jsx(j,{className:"h-4 w-4"}),"Ä°ptal"]}),m.jsxs(ae,{onClick:u,size:"sm",className:"flex items-center gap-2",children:[m.jsx(R,{className:"h-4 w-4"}),"BaÅŸlat"]})]})]})}):m.jsxs("div",{className:ee("p-4 bg-red-50 border border-red-200 rounded-lg",t),children:[m.jsx("p",{className:"text-red-600 text-sm",children:"TarayÄ±cÄ±nÄ±z ses kaydÄ±nÄ± desteklemiyor. LÃ¼tfen gÃ¼ncel bir tarayÄ±cÄ± kullanÄ±n."}),m.jsx(ae,{variant:"outline",size:"sm",onClick:a,className:"mt-2",children:"Kapat"})]})}function d({onSendMessage:e,onTyping:a,placeholder:t="Mesaj yazÄ±n...",disabled:s=!1,maxLength:r=1e3,className:n}){const[i,l]=x.useState(""),[c,d]=x.useState([]),[u,h]=x.useState(!1),[g,y]=x.useState(!1),[v,p]=x.useState(!1),f=x.useRef(null),w=x.useRef(null),b=x.useRef(null),N=x.useCallback(e=>{l(e),e.trim().length>0&&!v&&(p(!0),a?.(!0)),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{p(!1),a?.(!1)},2e3)},[v,a]),k=x.useCallback(()=>{if(!i.trim()&&0===c.length)return;let t=me.TEXT;c.length>0&&(t=c.some(e=>e.type.startsWith("audio/"))?me.VOICE:me.FILE),e(i.trim(),t,c.length>0?c:void 0),l(""),d([]),p(!1),a?.(!1),b.current&&clearTimeout(b.current)},[i,c,e,a]),D=x.useCallback(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),k())},[k]),z=x.useCallback(e=>{const a=Array.from(e.target.files||[]).filter(e=>!(e.size>10485760&&(alert(`${e.name} dosyasÄ± Ã§ok bÃ¼yÃ¼k. Maksimum 10MB olmalÄ±dÄ±r.`),1)));d(e=>[...e,...a]),w.current&&(w.current.value="")},[]),M=x.useCallback(e=>{d(a=>a.filter((a,t)=>t!==e))},[]),C=x.useCallback(e=>{if(e){const a=new File([e],"voice-message.webm",{type:e.type});d(e=>[...e,a])}y(!1),h(!1)},[]),A=e=>e.type.startsWith("image/")?m.jsx(K,{className:"h-4 w-4 text-info-600","aria-hidden":"true"}):e.type.startsWith("audio/")?m.jsx(F,{className:"h-4 w-4 text-warning-600","aria-hidden":"true"}):e.type.includes("pdf")?m.jsx(L,{className:"h-4 w-4 text-primary-600","aria-hidden":"true"}):m.jsx(B,{className:"h-4 w-4 text-neutral-500","aria-hidden":"true"}),I=e=>{if(0===e)return"0 Bytes";const a=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,a)).toFixed(2))} ${["Bytes","KB","MB"][a]}`};return m.jsxs("div",{className:ee("border-t border-gray-200 bg-white p-4",n),children:[c.length>0&&m.jsx("div",{className:"mb-3 space-y-2",children:c.map((e,a)=>m.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-neutral-200 bg-neutral-50 p-2 dark:border-neutral-700 dark:bg-neutral-900",children:[m.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-neutral-100 dark:bg-neutral-800",children:A(e)}),m.jsxs("div",{className:"min-w-0 flex-1",children:[m.jsx("p",{className:"truncate text-sm font-medium text-neutral-900 dark:text-neutral-100",children:e.name}),m.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:I(e.size)})]}),m.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>{M(a)},className:"h-6 w-6 p-0 text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200","aria-label":`${e.name} dosyasÄ±nÄ± kaldÄ±r`,children:m.jsx(j,{className:"h-4 w-4"})})]},a))}),g&&m.jsx("div",{className:"mb-3",children:m.jsx(o,{onRecordingComplete:C,onCancel:()=>{y(!1),h(!1)}})}),m.jsxs("div",{className:"flex items-end gap-2",children:[m.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>w.current?.click(),disabled:s,className:"h-10 w-10 p-0 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-full","aria-label":"Dosya ekle",children:m.jsx(B,{className:"h-4 w-4"})}),m.jsx("input",{ref:w,type:"file",multiple:!0,accept:"image/*,audio/*,video/*,.pdf,.doc,.docx,.txt",onChange:z,className:"hidden"}),m.jsxs("div",{className:"flex-1",children:[m.jsx(re,{ref:f,value:i,onChange:e=>{N(e.target.value)},onKeyPress:D,placeholder:t,disabled:s,maxLength:r,rows:1,className:"min-h-[40px] max-h-32 resize-none text-gray-900 bg-gray-50 border-gray-200 focus:bg-white focus:border-blue-500 rounded-full"}),i.length>.8*r&&m.jsxs("div",{className:"mt-1 text-right text-xs text-gray-500",children:[i.length,"/",r]})]}),m.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>{y(!0)},disabled:s||g,className:ee("h-10 w-10 p-0 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-full",u&&"text-red-600"),"aria-label":"Ses kaydÄ± baÅŸlat",children:m.jsx(R,{className:"h-4 w-4"})}),m.jsx(ae,{variant:"ghost",size:"sm",disabled:s,className:"h-10 w-10 p-0 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-full","aria-label":"Emoji paneli",children:m.jsx(S,{className:"h-4 w-4"})}),m.jsx(ae,{onClick:k,disabled:s||!i.trim()&&0===c.length,size:"sm",className:"h-10 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-full","aria-label":"Mesaj gÃ¶nder",children:m.jsx(E,{className:"h-4 w-4"})})]})]})}import{j as m,av as u,aw as h,ax as g,ay as y,az as v,aA as p,aB as f,aC as w,r as x,aD as b,aE as N,aF as k,aa as D,l as z,L as M,aG as C,X as j,aH as A,aI as I,aJ as _,aK as E,aL as R,aM as B,aN as S,aO as K,aP as F,a5 as L,n as T,aQ as U,$,aR as G,aS as O,aT as Y}from"./react-vendor-Zi_jsHoK.js";import{g as P,l as H,d as V,D as Q,x as q,u as J,y as W,h as X,i as Z,z as ee,B as ae,f as te,I as se,v as re}from"./beneficiaries-page-CkZlrYV8.js";import{I as ne,Q as ie}from"./appwrite-vendor-Ct7vfU_L.js";import{t as le}from"./toast-vendor-Ci27VDWJ.js";import{P as ce}from"./events-finance-page-DWyC3OLf.js";class oe{static instance;constructor(){this.initializeRealtime()}static getInstance(){return oe.instance||(oe.instance=new oe),oe.instance}initializeRealtime(){try{H.info("Appwrite Messaging Service initialized")}catch(e){H.error("Failed to initialize messaging service:",e)}}async createConversation(e){try{if(!V)throw new Error("Databases service is not initialized");const a=ne.unique(),t=await V.createDocument(Q,"conversations",a,{name:e.name||"",type:e.type,created_by:e.createdBy,avatar_url:e.avatarUrl||"",is_active:!0});return e.participantIds&&e.participantIds.length>0&&await this.addParticipantsToConversation(a,e.participantIds),H.info("Conversation created successfully",{conversationId:a}),this.mapConversationFromAppwrite(t)}catch(a){throw H.error("Failed to create conversation:",a),new Error("KonuÅŸma oluÅŸturulamadÄ±")}}async getConversations(e,a=50,t=0){try{if(!V)throw new Error("Databases service is not initialized");const s=await V.listDocuments(Q,"conversation_participants",[ie.equal("user_id",e),ie.limit(a),ie.offset(t)]);if(!s.documents.length)return[];const r=s.documents.map(e=>e.conversation_id);return(await V.listDocuments(Q,"conversations",[ie.equal("$id",r),ie.equal("is_active",!0)])).documents.map(e=>this.mapConversationFromAppwrite(e))}catch(s){throw H.error("Failed to get conversations:",s),new Error("KonuÅŸmalar yÃ¼klenemedi")}}async getConversation(e){try{if(!V)throw new Error("Databases service is not initialized");const a=await V.getDocument(Q,"conversations",e);return this.mapConversationFromAppwrite(a)}catch(a){return H.error("Failed to get conversation:",a),null}}async addParticipantsToConversation(e,a){try{if(!V)throw new Error("Databases service is not initialized");for(const t of a)await V.createDocument(Q,"conversation_participants",ne.unique(),{conversation_id:e,user_id:t,joined_at:(new Date).toISOString(),role:"member"});H.info("Participants added to conversation",{conversationId:e,userIds:a})}catch(t){throw H.error("Failed to add participants:",t),new Error("KatÄ±lÄ±mcÄ±lar eklenemedi")}}async sendMessage(e){try{if(!V)throw new Error("Databases service is not initialized");const a=ne.unique(),t=await V.createDocument(Q,"messages",a,{conversation_id:e.conversationId,sender_id:e.senderId,content:e.content||"",type:e.type,reply_to:e.replyTo||null,is_edited:!1,is_deleted:!1});return e.attachments&&e.attachments.length>0&&await this.handleMessageAttachments(a,e.attachments),H.info("Message sent successfully",{messageId:a}),this.mapMessageFromAppwrite(t)}catch(a){throw H.error("Failed to send message:",a),new Error("Mesaj gÃ¶nderilemedi")}}async getMessages(e){try{if(!V)throw new Error("Databases service is not initialized");const a=[ie.equal("conversation_id",e.conversationId),ie.equal("is_deleted",!1),ie.orderDesc("$createdAt"),ie.limit(e.limit||50),ie.offset(e.offset||0)];return e.senderId&&a.push(ie.equal("sender_id",e.senderId)),e.type&&a.push(ie.equal("type",e.type)),(await V.listDocuments(Q,"messages",a)).documents.map(e=>this.mapMessageFromAppwrite(e))}catch(a){throw H.error("Failed to get messages:",a),new Error("Mesajlar yÃ¼klenemedi")}}async deleteMessage(e,a){try{if(!V)throw new Error("Databases service is not initialized");if((await V.getDocument(Q,"messages",e)).sender_id!==a)throw new Error("Bu mesajÄ± silme yetkiniz yok");return await V.updateDocument(Q,"messages",e,{is_deleted:!0,content:"[Bu mesaj silindi]"}),H.info("Message deleted successfully",{messageId:e}),!0}catch(t){throw H.error("Failed to delete message:",t),new Error("Mesaj silinemedi")}}async handleMessageAttachments(e,a){try{if(!q||!V)throw new Error("Storage or databases service is not initialized");for(const t of a){const a=ne.unique(),s=this.getBucketForFileType(t.type),r=await q.createFile(s,a,t);await V.createDocument(Q,"message_attachments",ne.unique(),{message_id:e,file_id:r.$id,file_name:t.name,file_size:t.size,file_type:t.type,bucket_id:s})}H.info("Message attachments processed",{messageId:e,fileCount:a.length})}catch(t){throw H.error("Failed to handle message attachments:",t),new Error("Dosya ekleri iÅŸlenemedi")}}getBucketForFileType(e){return e.startsWith("audio/")?"voice_messages":"message_attachments"}async getMessageAttachments(e){try{if(!V||!q)throw new Error("Databases or storage service is not initialized");return(await V.listDocuments(Q,"message_attachments",[ie.equal("message_id",e)])).documents.map(e=>({id:e.$id,messageId:e.message_id,fileId:e.file_id,fileName:e.file_name,fileSize:e.file_size,fileType:e.file_type,bucketId:e.bucket_id,fileUrl:q?.getFileView(e.bucket_id,e.file_id).toString()||"",createdAt:new Date(e.$createdAt)}))}catch(a){return H.error("Failed to get message attachments:",a),[]}}async updateUserPresence(e,a){try{if(!V)throw new Error("Databases service is not initialized");await V.createDocument(Q,"user_presence",ne.unique(),{user_id:e,is_online:a,last_seen:(new Date).toISOString()}),H.info("User presence updated",{userId:e,isOnline:a})}catch(t){H.error("Failed to update user presence:",t)}}async setTypingIndicator(e,a,t){try{if(!V)throw new Error("Databases service is not initialized");if(t)await V.createDocument(Q,"typing_indicators",ne.unique(),{conversation_id:e,user_id:a,is_typing:!0});else{const t=await V.listDocuments(Q,"typing_indicators",[ie.equal("conversation_id",e),ie.equal("user_id",a)]);for(const e of t.documents)await V.deleteDocument(Q,"typing_indicators",e.$id)}H.info("Typing indicator updated",{conversationId:e,userId:a,isTyping:t})}catch(s){H.error("Failed to update typing indicator:",s)}}async markMessageAsRead(e,a){try{if(!V)throw new Error("Databases service is not initialized");await V.createDocument(Q,"message_read_status",ne.unique(),{message_id:e,user_id:a,read_at:(new Date).toISOString()}),H.info("Message marked as read",{messageId:e,userId:a})}catch(t){H.error("Failed to mark message as read:",t)}}mapConversationFromAppwrite(e){return{id:e.$id,name:e.name,type:e.type,participants:[],unreadCount:0,createdBy:e.created_by,isActive:e.is_active,createdAt:new Date(e.$createdAt),updatedAt:new Date(e.$updatedAt)}}mapMessageFromAppwrite(e){return{id:e.$id,conversationId:e.conversation_id,senderId:e.sender_id,senderName:"",content:e.content,type:e.type,attachments:[],replyTo:e.reply_to?{id:e.reply_to}:void 0,isDeleted:e.is_deleted,createdAt:new Date(e.$createdAt),updatedAt:new Date(e.$updatedAt),readBy:[]}}}const de=oe.getInstance();var me=(e=>(e.TEXT="text",e.FILE="file",e.VOICE="voice",e.SYSTEM="system",e))(me||{});const ue=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[s,r]=x.useState(null),[n,l]=x.useState([]),[o,u]=x.useState([]),[h,g]=x.useState(!1),[y,v]=x.useState(!1),[p,f]=x.useState(!0),{isConnected:w}=function(){const[e,a]=x.useState({isConnected:!1,isLoading:!0,error:null,projectUrl:null});return x.useEffect(()=>{if(!function(){const{endpoint:e,projectId:a}=W.appwrite;return Boolean(e&&a&&!e.includes("your-endpoint")&&!a.includes("your-project-id")&&e.startsWith("https://")&&e.includes(".appwrite.io"))}())return a({isConnected:!1,isLoading:!1,error:"Appwrite konfigÃ¼rasyonu eksik - .env dosyasÄ±nÄ± kontrol edin",projectUrl:null}),void 0;(async()=>{try{const{data:e,error:t}=await X.list(Z.USER_PROFILES,[]);if(t){if(!t.message.includes("collection")&&!t.message.includes("not found"))throw t;a({isConnected:!0,isLoading:!1,error:"BaÄŸlantÄ± baÅŸarÄ±lÄ± - User profiles koleksiyonu henÃ¼z oluÅŸturulmamÄ±ÅŸ",projectUrl:W.appwrite.endpoint})}else a({isConnected:!0,isLoading:!1,error:null,projectUrl:W.appwrite.endpoint})}catch(e){H.error("Appwrite connection test failed:",e),a({isConnected:!1,isLoading:!1,error:e.message??"Appwrite baÄŸlantÄ±sÄ± kurulamadÄ±",projectUrl:null})}})()},[]),e}(),{sendMessage:b}=function(e={}){const{user:a,isAuthenticated:t,conversations:s,setConversations:r,selectedConversation:n,setSelectedConversation:i,messages:l,setMessages:c,loading:o,setLoading:d,error:m,clearError:u,handleError:h,handleSuccess:g,options:{autoLoadConversations:y,autoLoadMessages:v,messageLimit:p}}=function(e={}){const{autoLoadConversations:a=!0,autoLoadMessages:t=!0,messageLimit:s=50,onError:r,onSuccess:n}=e,{user:i,isAuthenticated:l}=J(),[c,o]=x.useState([]),[d,m]=x.useState(null),[u,h]=x.useState([]),[g,y]=x.useState(!1),[v,p]=x.useState(null),f=x.useCallback(()=>{p(null)},[]),w=x.useCallback((e,a)=>{const t=e?.message||a;p(t),r?.(t),le.error(t),H.error(a,e)},[r]),b=x.useCallback(e=>{n?.(e),le.success(e)},[n]);return{user:i,isAuthenticated:l,conversations:c,setConversations:o,selectedConversation:d,setSelectedConversation:m,messages:u,setMessages:h,loading:g,setLoading:y,error:v,setError:p,clearError:f,handleError:w,handleSuccess:b,options:{autoLoadConversations:a,autoLoadMessages:t,messageLimit:s}}}(e),f=x.useCallback(async()=>{try{if(d(!0),u(),!t||!a)throw new Error("KullanÄ±cÄ± oturumu bulunamadÄ±");const e=await de.getUserConversations(a.id);r(e)}catch(e){h(e,"KonuÅŸmalar yÃ¼klenemedi")}finally{d(!1)}},[t,a,h,u,d,r]),w=x.useCallback(async(e,s,r=!1)=>{try{if(d(!0),u(),!t||!a)throw new Error("KullanÄ±cÄ± oturumu bulunamadÄ±");if(!s||0===s.length)throw new Error("En az bir katÄ±lÄ±mcÄ± seÃ§melisiniz");if(r&&(!e||0===e.trim().length))throw new Error("Grup adÄ± gereklidir");const n=await de.createConversation(e,s,r);return await f(),g(r?`Grup "${e}" oluÅŸturuldu`:"KonuÅŸma oluÅŸturuldu"),n}catch(n){throw h(n,"KonuÅŸma oluÅŸturulamadÄ±"),n}finally{d(!1)}},[t,a,h,g,u,d,f]),b=x.useCallback(async(e,a=p,t=0)=>{try{d(!0),u();const s=await de.getConversationMessages(e,a,t);c(t>0?e=>[...e,...s]:s)}catch(s){h(s,"Mesajlar yÃ¼klenemedi")}finally{d(!1)}},[p,h,u,d,c]),N=x.useCallback(async(e,s,r)=>{try{if(!t||!a)throw new Error("KullanÄ±cÄ± oturumu bulunamadÄ±");if(!s||0===s.trim().length)throw new Error("Mesaj iÃ§eriÄŸi boÅŸ olamaz");const n=await de.sendMessage(e,s,a.id,a.name||a.email,r);return await b(e),n}catch(n){throw h(n,"Mesaj gÃ¶nderilemedi"),n}},[t,a,h,b]),k=x.useCallback(async e=>{try{await de.markMessageAsRead(e)}catch(a){H.error("Failed to mark message as read",a)}},[]),D=x.useCallback(async e=>{try{if(!t||!a)throw new Error("KullanÄ±cÄ± oturumu bulunamadÄ±");await de.joinConversation(e,a.id),g("KonuÅŸmaya katÄ±ldÄ±nÄ±z")}catch(s){h(s,"KonuÅŸmaya katÄ±lamadÄ±")}},[t,a,h,g]),z=x.useCallback(async e=>{try{if(!t||!a)throw new Error("KullanÄ±cÄ± oturumu bulunamadÄ±");await de.leaveConversation(e,a.id),g("KonuÅŸmadan ayrÄ±ldÄ±nÄ±z"),await f()}catch(s){h(s,"KonuÅŸmadan ayrÄ±lamadÄ±")}},[t,a,h,g,f]),M=x.useCallback(async e=>{try{return await de.uploadAttachment(e)}catch(a){throw h(a,"Dosya yÃ¼klenemedi"),a}},[h]),C=x.useCallback(async e=>{try{return await de.getFileDownloadUrl(e)}catch(a){throw h(a,"Dosya indirilemedi"),a}},[h]),j=x.useCallback(async e=>{try{d(!0),u(),await de.deleteMessage(e),c(a=>a.filter(a=>a.id!==e)),g("Mesaj silindi")}catch(a){h(a,"Mesaj silinemedi")}finally{d(!1)}},[h,g,u,d,c]),A=x.useCallback(async e=>{try{d(!0),u(),await de.deleteConversation(e),r(a=>a.filter(a=>a.id!==e)),n===e&&(i(null),c([])),g("KonuÅŸma silindi")}catch(a){h(a,"KonuÅŸma silinemedi")}finally{d(!1)}},[n,h,g,u,d,r,c,i]);return x.useEffect(()=>{y&&t&&a&&f()},[y,t,a,f]),x.useEffect(()=>{v&&n&&b(n)},[n,v,b]),{conversations:s,selectedConversation:n,messages:l,loading:o,error:m,createConversation:w,loadConversations:f,joinConversation:D,leaveConversation:z,deleteConversation:A,sendMessage:N,loadMessages:b,markAsRead:k,deleteMessage:j,uploadAttachment:M,getFileDownloadUrl:C,setSelectedConversation:i,clearError:u}}();x.useEffect(()=>{const e=()=>{v(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),x.useEffect(()=>{const e=[{id:"1",name:"Genel Sohbet",type:"group",participants:[{userId:"user1",userName:"Ahmet YÄ±lmaz",userRole:"user",conversationRole:"member",joinedAt:new Date,isOnline:!0},{userId:"user2",userName:"AyÅŸe Demir",userRole:"user",conversationRole:"member",joinedAt:new Date,isOnline:!0},{userId:"user3",userName:"Mehmet Kaya",userRole:"user",conversationRole:"member",joinedAt:new Date,isOnline:!1}],lastMessage:{id:"1",conversationId:"1",senderId:"user1",senderName:"Ahmet YÄ±lmaz",content:"Merhaba, nasÄ±lsÄ±nÄ±z?",type:"text",attachments:[],createdAt:new Date,updatedAt:new Date,isDeleted:!1,readBy:[]},lastMessageAt:new Date,unreadCount:3,createdBy:"user1",createdAt:new Date,updatedAt:new Date,isActive:!0},{id:"2",name:"Proje Ekibi",type:"group",participants:[{userId:"user1",userName:"Ahmet YÄ±lmaz",userRole:"user",conversationRole:"member",joinedAt:new Date,isOnline:!0},{userId:"user4",userName:"AyÅŸe Demir",userRole:"user",conversationRole:"member",joinedAt:new Date,isOnline:!0},{userId:"user5",userName:"Fatma Ã–z",userRole:"user",conversationRole:"member",joinedAt:new Date,isOnline:!0}],lastMessage:{id:"2",conversationId:"2",senderId:"user4",senderName:"AyÅŸe Demir",content:"ToplantÄ± saat 14:00'da",type:"text",attachments:[],createdAt:new Date(Date.now()-36e5),updatedAt:new Date(Date.now()-36e5),isDeleted:!1,readBy:[]},lastMessageAt:new Date(Date.now()-36e5),unreadCount:0,createdBy:"user1",createdAt:new Date,updatedAt:new Date,isActive:!0}];l(e),g(w)},[w]),x.useEffect(()=>{if(s){const e=[{id:"1",conversationId:s,senderId:"user1",senderName:"Ahmet YÄ±lmaz",content:"Merhaba, nasÄ±lsÄ±nÄ±z?",type:"text",attachments:[],createdAt:new Date(Date.now()-36e5),updatedAt:new Date(Date.now()-36e5),isDeleted:!1,readBy:[]},{id:"2",conversationId:s,senderId:"user2",senderName:"AyÅŸe Demir",content:"Ä°yiyim, teÅŸekkÃ¼rler. Siz nasÄ±lsÄ±nÄ±z?",type:"text",attachments:[],createdAt:new Date(Date.now()-35e5),updatedAt:new Date(Date.now()-35e5),isDeleted:!1,readBy:[]},{id:"3",conversationId:s,senderId:"user1",senderName:"Ahmet YÄ±lmaz",content:"Ben de iyiyim, bugÃ¼n toplantÄ± var mÄ±?",type:"text",attachments:[],createdAt:new Date(Date.now()-3e6),updatedAt:new Date(Date.now()-3e6),isDeleted:!1,readBy:[]},{id:"4",conversationId:s,senderId:"user2",senderName:"AyÅŸe Demir",content:"Evet, saat 14:00'da toplantÄ± salonunda",type:"text",attachments:[],createdAt:new Date(Date.now()-29e5),updatedAt:new Date(Date.now()-29e5),isDeleted:!1,readBy:[]}];u(e)}},[s]);const N=()=>{},D=n.find(e=>e.id===s);return m.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[y&&m.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border-b",children:[p?null:m.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>{f(!0)},className:"mr-2",children:m.jsx(T,{className:"h-4 w-4"})}),m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx(k,{className:"h-6 w-6 text-blue-600"}),m.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Mesajlar"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(te,{variant:h?"default":"destructive",className:"text-xs",children:h?"BaÄŸlÄ±":"BaÄŸlantÄ± Yok"}),m.jsx(ae,{variant:"ghost",size:"sm",children:m.jsx(U,{className:"h-4 w-4"})})]})]}),!y&&m.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border-b",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx(k,{className:"h-6 w-6 text-blue-600"}),m.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Kurum Ä°Ã§i MesajlaÅŸma"}),m.jsx(te,{variant:h?"default":"destructive",children:h?"BaÄŸlÄ±":"BaÄŸlantÄ± Yok"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsxs(ae,{variant:"outline",size:"sm",children:[m.jsx($,{className:"h-4 w-4 mr-2"}),"Yeni Grup"]}),m.jsx(ae,{variant:"outline",size:"sm",children:m.jsx(U,{className:"h-4 w-4"})})]})]}),m.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[m.jsx("div",{className:ee("flex flex-col bg-white border-r",y?"absolute inset-0 z-10 w-full":"w-80",!p&&y&&"hidden"),children:m.jsx(i,{conversations:n,selectedConversationId:s,onConversationSelect:e=>{r(e),y&&f(!1)},onNewConversation:N,loading:!1})}),m.jsx("div",{className:"flex-1 flex flex-col bg-white",children:s?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-white",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsxs(e,{className:"h-10 w-10",children:[m.jsx(a,{src:""}),m.jsx(t,{className:"bg-blue-100 text-blue-600 font-semibold",children:D?.name?.charAt(0)||"G"})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"font-semibold text-gray-900",children:D?.name}),m.jsxs("p",{className:"text-sm text-gray-500",children:[D?.participants.length," katÄ±lÄ±mcÄ±"]})]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(ae,{variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-900",children:m.jsx(G,{className:"h-4 w-4"})}),m.jsx(ae,{variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-900",children:m.jsx(O,{className:"h-4 w-4"})}),m.jsx(ae,{variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-900",children:m.jsx(Y,{className:"h-4 w-4"})})]})]}),m.jsx("div",{className:"flex-1 bg-gray-50",children:m.jsx(c,{messages:o,currentUserId:"user1",loading:!1,hasMoreMessages:!1,typingUsers:[]})}),m.jsx(d,{onSendMessage:async(e,a,t)=>{if(e.trim()&&s)try{await b(s,e),y&&f(!1)}catch(r){}},placeholder:"Mesaj yazÄ±n...",disabled:!1})]}):m.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:m.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[m.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(k,{className:"h-10 w-10 text-blue-600"})}),m.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"MesajlaÅŸmaya BaÅŸlayÄ±n"}),m.jsx("p",{className:"text-gray-500 mb-6",children:"Sol taraftan bir konuÅŸma seÃ§erek mesajlaÅŸmaya baÅŸlayÄ±n veya yeni bir konuÅŸma oluÅŸturun."}),m.jsxs(ae,{onClick:N,className:"bg-blue-600 hover:bg-blue-700",children:[m.jsx($,{className:"h-4 w-4 mr-2"}),"Yeni KonuÅŸma"]})]})})})]})]})}},Symbol.toStringTag,{value:"Module"}));export{e as A,ue as I,s as S,a,t as b};
