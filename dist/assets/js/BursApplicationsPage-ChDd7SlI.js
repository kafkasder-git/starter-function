function e(){const e=o(),[z,I]=a.useState(""),[_,M]=a.useState("all"),[S,$]=a.useState("all"),[V,H]=a.useState(!1),[K,L]=a.useState(!1),[J,Q]=a.useState([]),[U,W]=a.useState({applicantName:"",email:"",phone:"",school:"",program:"",grade:"",requestedAmount:0,familyIncome:0,gpa:0});a.useEffect(()=>{X()},[]);const X=async()=>{try{const e=await g.getAidRequests(1,1e3,{aidType:"education"});if(e.data){const a=e.data.data.map(Z);Q(a)}}catch(e){x.error("Failed to load applications",e),h.error("Başvurular yüklenirken hata oluştu")}},Z=e=>{const a=e.description.split(" - "),l=a[0]||"",i=a[1]||"",r=a[2]||"",n=a.find(e=>e.startsWith("Aile Geliri:"))||"Aile Geliri: 0",c=parseFloat(n.replace("Aile Geliri: ",""))||0,d=a.find(e=>e.startsWith("GPA:"))||"GPA: 0",s=parseFloat(d.replace("GPA: ",""))||0;return{id:e.$id,applicantName:e.applicant_name,email:e.applicant_email||"",phone:e.applicant_phone,school:l,program:r,grade:i,requestedAmount:e.requested_amount||0,familyIncome:c,gpa:s,status:{pending:"pending",approved:"approved",rejected:"rejected",under_review:"interview"}[e.status]||"pending",applicationDate:e.created_at,documents:{transcript:!1,incomeProof:!1,recommendation:!1,essay:!1},priority:{high:"high",medium:"medium",low:"low"}[e.urgency]||"medium"}},ee=a.useMemo(()=>({total:J.length,pending:J.filter(e=>"pending"===e.status).length,approved:J.filter(e=>"approved"===e.status).length,rejected:J.filter(e=>"rejected"===e.status).length,interview:J.filter(e=>"interview"===e.status).length}),[J]),ae=a.useMemo(()=>J.filter(e=>{const a=e.applicantName.toLowerCase().includes(z.toLowerCase())||e.school.toLowerCase().includes(z.toLowerCase())||e.program.toLowerCase().includes(z.toLowerCase()),l="all"===_||e.status===_,i="all"===S||e.priority===S;return a&&l&&i}),[J,z,_,S]),le=e=>{const a={pending:{label:"Beklemede",variant:"secondary",icon:n},approved:{label:"Onaylandı",variant:"default",icon:c},rejected:{label:"Reddedildi",variant:"destructive",icon:d},interview:{label:"Mülakat",variant:"outline",icon:m}}[e],i=a.icon;return l.jsxs(q,{variant:a.variant,className:"flex items-center gap-1",children:[l.jsx(i,{className:"h-3 w-3"}),a.label]})},ie=e=>{const a={high:{label:"Yüksek",variant:"destructive"},medium:{label:"Orta",variant:"secondary"},low:{label:"Düşük",variant:"outline"}}[e];return l.jsx(q,{variant:a.variant,children:a.label})};return e?l.jsxs("div",{className:"space-y-4 p-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Burs Başvuruları"}),l.jsxs(f,{onClick:()=>{H(!0)},children:[l.jsx(i,{className:"mr-2 h-4 w-4"}),"Yeni Başvuru"]})]}),l.jsxs(u,{children:[l.jsx(p,{title:"Toplam Başvuru",value:ee.total.toString(),icon:r,color:"blue"}),l.jsx(p,{title:"Beklemede",value:ee.pending.toString(),icon:n,color:"yellow"}),l.jsx(p,{title:"Onaylandı",value:ee.approved.toString(),icon:c,color:"green"}),l.jsx(p,{title:"Reddedildi",value:ee.rejected.toString(),icon:d,color:"red"})]}),l.jsx(y,{children:l.jsxs(b,{className:"space-y-3 p-4",children:[l.jsx(k,{placeholder:"Başvuru ara...",value:z,onChange:e=>{I(e.target.value)}}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs(w,{value:_,onValueChange:M,children:[l.jsx(B,{children:l.jsx(j,{placeholder:"Durum"})}),l.jsxs(C,{children:[l.jsx(A,{value:"all",children:"Tüm Durumlar"}),l.jsx(A,{value:"pending",children:"Beklemede"}),l.jsx(A,{value:"approved",children:"Onaylandı"}),l.jsx(A,{value:"rejected",children:"Reddedildi"}),l.jsx(A,{value:"interview",children:"Mülakat"})]})]}),l.jsxs(w,{value:S,onValueChange:$,children:[l.jsx(B,{children:l.jsx(j,{placeholder:"Öncelik"})}),l.jsxs(C,{children:[l.jsx(A,{value:"all",children:"Tüm Öncelikler"}),l.jsx(A,{value:"high",children:"Yüksek"}),l.jsx(A,{value:"medium",children:"Orta"}),l.jsx(A,{value:"low",children:"Düşük"})]})]})]})]})}),l.jsx("div",{className:"space-y-3",children:0===ae.length?l.jsx(y,{children:l.jsxs(b,{className:"p-8 text-center",children:[l.jsx(r,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),l.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"Henüz başvuru yok"}),l.jsx("p",{className:"mb-4 text-gray-500",children:"İlk burs başvurusunu ekleyerek başlayın"}),l.jsxs(f,{onClick:()=>{H(!0)},children:[l.jsx(i,{className:"mr-2 h-4 w-4"}),"Yeni Başvuru Ekle"]})]})}):ae.map(e=>l.jsx("div",{children:l.jsx(y,{children:l.jsxs(b,{className:"p-4",children:[l.jsxs("div",{className:"mb-3 flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(v,{children:l.jsx(N,{children:e.applicantName.charAt(0)})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium",children:e.applicantName}),l.jsx("p",{className:"text-sm text-gray-500",children:e.school})]})]}),l.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[le(e.status),ie(e.priority)]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Program:"}),l.jsx("p",{className:"font-medium",children:e.program})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Sınıf:"}),l.jsx("p",{className:"font-medium",children:e.grade})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Talep Edilen:"}),l.jsxs("p",{className:"font-medium",children:["₺",e.requestedAmount.toLocaleString()]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"GPA:"}),l.jsx("p",{className:"font-medium",children:e.gpa})]})]}),l.jsxs("div",{className:"mt-3 flex items-center justify-between border-t pt-3",children:[l.jsx("span",{className:"text-xs text-gray-500",children:new Date(e.applicationDate).toLocaleDateString("tr-TR")}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(f,{variant:"outline",size:"sm",children:l.jsx(s,{className:"h-4 w-4"})}),l.jsx(f,{variant:"outline",size:"sm",children:l.jsx(t,{className:"h-4 w-4"})})]})]})]})})},e.id))})]}):l.jsxs("div",{className:"space-y-6 p-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Burs Başvuruları"}),l.jsx("p",{className:"text-gray-600",children:"Burs başvurularını yönetin ve değerlendirin"})]}),l.jsxs(f,{onClick:()=>{H(!0)},children:[l.jsx(i,{className:"mr-2 h-4 w-4"}),"Yeni Başvuru"]})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-5",children:[l.jsx(y,{children:l.jsx(b,{className:"p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(r,{className:"h-8 w-8 text-blue-600"}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Toplam Başvuru"}),l.jsx("p",{className:"text-2xl font-bold",children:ee.total})]})]})})}),l.jsx(y,{children:l.jsx(b,{className:"p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(n,{className:"h-8 w-8 text-yellow-600"}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Beklemede"}),l.jsx("p",{className:"text-2xl font-bold",children:ee.pending})]})]})})}),l.jsx(y,{children:l.jsx(b,{className:"p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(c,{className:"h-8 w-8 text-green-600"}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Onaylandı"}),l.jsx("p",{className:"text-2xl font-bold",children:ee.approved})]})]})})}),l.jsx(y,{children:l.jsx(b,{className:"p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(d,{className:"h-8 w-8 text-red-600"}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Reddedildi"}),l.jsx("p",{className:"text-2xl font-bold",children:ee.rejected})]})]})})}),l.jsx(y,{children:l.jsx(b,{className:"p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(m,{className:"h-8 w-8 text-orange-600"}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Mülakat"}),l.jsx("p",{className:"text-2xl font-bold",children:ee.interview})]})]})})})]}),l.jsx(y,{children:l.jsx(b,{className:"p-6",children:l.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[l.jsx("div",{className:"flex-1",children:l.jsx(k,{placeholder:"Başvuru ara...",value:z,onChange:e=>{I(e.target.value)}})}),l.jsxs(w,{value:_,onValueChange:M,children:[l.jsx(B,{className:"w-full md:w-48",children:l.jsx(j,{placeholder:"Durum"})}),l.jsxs(C,{children:[l.jsx(A,{value:"all",children:"Tüm Durumlar"}),l.jsx(A,{value:"pending",children:"Beklemede"}),l.jsx(A,{value:"approved",children:"Onaylandı"}),l.jsx(A,{value:"rejected",children:"Reddedildi"}),l.jsx(A,{value:"interview",children:"Mülakat"})]})]}),l.jsxs(w,{value:S,onValueChange:$,children:[l.jsx(B,{className:"w-full md:w-48",children:l.jsx(j,{placeholder:"Öncelik"})}),l.jsxs(C,{children:[l.jsx(A,{value:"all",children:"Tüm Öncelikler"}),l.jsx(A,{value:"high",children:"Yüksek"}),l.jsx(A,{value:"medium",children:"Orta"}),l.jsx(A,{value:"low",children:"Düşük"})]})]})]})})}),l.jsxs(y,{children:[l.jsx(G,{children:l.jsx(T,{children:"Başvuru Listesi"})}),l.jsx(b,{children:0===ae.length?l.jsxs("div",{className:"py-8 text-center",children:[l.jsx(r,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),l.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:"Henüz başvuru yok"}),l.jsx("p",{className:"mb-4 text-gray-500",children:"İlk burs başvurusunu ekleyerek başlayın"}),l.jsxs(f,{onClick:()=>{H(!0)},children:[l.jsx(i,{className:"mr-2 h-4 w-4"}),"Yeni Başvuru Ekle"]})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b",children:[l.jsx("th",{className:"p-4 text-left",children:"Başvuran"}),l.jsx("th",{className:"p-4 text-left",children:"Okul/Program"}),l.jsx("th",{className:"p-4 text-left",children:"Talep Edilen"}),l.jsx("th",{className:"p-4 text-left",children:"GPA"}),l.jsx("th",{className:"p-4 text-left",children:"Durum"}),l.jsx("th",{className:"p-4 text-left",children:"Öncelik"}),l.jsx("th",{className:"p-4 text-left",children:"Tarih"}),l.jsx("th",{className:"p-4 text-left",children:"İşlemler"})]})}),l.jsx("tbody",{children:ae.map(e=>l.jsxs(E.tr,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"border-b hover:bg-gray-50",children:[l.jsx("td",{className:"p-4",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(v,{children:l.jsx(N,{children:e.applicantName.charAt(0)})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:e.applicantName}),l.jsx("p",{className:"text-sm text-gray-500",children:e.email})]})]})}),l.jsx("td",{className:"p-4",children:l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:e.school}),l.jsx("p",{className:"text-sm text-gray-500",children:e.program})]})}),l.jsxs("td",{className:"p-4",children:[l.jsxs("p",{className:"font-medium",children:["₺",e.requestedAmount.toLocaleString()]}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Aile Geliri: ₺",e.familyIncome.toLocaleString()]})]}),l.jsx("td",{className:"p-4",children:l.jsx("p",{className:"font-medium",children:e.gpa})}),l.jsx("td",{className:"p-4",children:le(e.status)}),l.jsx("td",{className:"p-4",children:ie(e.priority)}),l.jsx("td",{className:"p-4",children:l.jsx("p",{className:"text-sm",children:new Date(e.applicationDate).toLocaleDateString("tr-TR")})}),l.jsx("td",{className:"p-4",children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(f,{variant:"outline",size:"sm",children:l.jsx(s,{className:"h-4 w-4"})}),l.jsx(f,{variant:"outline",size:"sm",children:l.jsx(t,{className:"h-4 w-4"})})]})})]},e.id))})]})})})]}),l.jsx(F,{open:V,onOpenChange:H,children:l.jsxs(D,{className:"max-w-2xl",children:[l.jsxs(O,{children:[l.jsx(P,{children:"Yeni Burs Başvurusu"}),l.jsx(R,{children:"Burs başvurusu için gerekli bilgileri doldurun"})]}),l.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!U.applicantName||!U.email||!U.school)return h.error("Başvuran adı, e-posta ve okul alanları zorunludur"),void 0;try{L(!0);const e=await g.createAidRequest({applicant_name:U.applicantName,applicant_email:U.email,applicant_phone:U.phone,applicant_address:U.school,aid_type:"education",requested_amount:U.requestedAmount,currency:"TRY",urgency:"medium",description:`${U.school} - ${U.grade} - ${U.program} - Aile Geliri: ${U.familyIncome} - GPA: ${U.gpa}`,reason:"Scholarship application"});e.error?(x.error("Failed to create scholarship application",e.error),h.error("Başvuru oluşturulurken hata oluştu")):(h.success("Burs başvurusu başarıyla oluşturuldu!"),H(!1),W({applicantName:"",email:"",phone:"",school:"",program:"",grade:"",requestedAmount:0,familyIncome:0,gpa:0}),X())}catch(a){x.error("Error submitting application",a),h.error("Başvuru oluşturulurken hata oluştu")}finally{L(!1)}},className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Y,{htmlFor:"applicantName",children:"Başvuran Adı"}),l.jsx(k,{id:"applicantName",value:U.applicantName,onChange:e=>{W({...U,applicantName:e.target.value})}})]}),l.jsxs("div",{children:[l.jsx(Y,{htmlFor:"email",children:"E-posta"}),l.jsx(k,{id:"email",type:"email",value:U.email,onChange:e=>{W({...U,email:e.target.value})}})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Y,{htmlFor:"phone",children:"Telefon"}),l.jsx(k,{id:"phone",value:U.phone,onChange:e=>{W({...U,phone:e.target.value})}})]}),l.jsxs("div",{children:[l.jsx(Y,{htmlFor:"school",children:"Okul"}),l.jsx(k,{id:"school",value:U.school,onChange:e=>{W({...U,school:e.target.value})}})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Y,{htmlFor:"program",children:"Program"}),l.jsx(k,{id:"program",value:U.program,onChange:e=>{W({...U,program:e.target.value})}})]}),l.jsxs("div",{children:[l.jsx(Y,{htmlFor:"grade",children:"Sınıf"}),l.jsx(k,{id:"grade",value:U.grade,onChange:e=>{W({...U,grade:e.target.value})}})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx(Y,{htmlFor:"requestedAmount",children:"Talep Edilen Miktar"}),l.jsx(k,{id:"requestedAmount",type:"number",value:U.requestedAmount,onChange:e=>{W({...U,requestedAmount:Number(e.target.value)})}})]}),l.jsxs("div",{children:[l.jsx(Y,{htmlFor:"familyIncome",children:"Aile Geliri"}),l.jsx(k,{id:"familyIncome",type:"number",value:U.familyIncome,onChange:e=>{W({...U,familyIncome:Number(e.target.value)})}})]}),l.jsxs("div",{children:[l.jsx(Y,{htmlFor:"gpa",children:"GPA"}),l.jsx(k,{id:"gpa",type:"number",step:"0.01",value:U.gpa,onChange:e=>{W({...U,gpa:Number(e.target.value)})}})]})]}),l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsx(f,{variant:"outline",onClick:()=>{H(!1)},children:"İptal"}),l.jsx(f,{type:"submit",disabled:K,children:K?"Gönderiliyor...":"Başvuru Gönder"})]})]})]})})]})}import{r as a,j as l,aa as i,a5 as r,o as n,K as c,X as d,E as s,a2 as t,a8 as m}from"./react-vendor-Zi_jsHoK.js";import{t as h}from"./toast-vendor-Ci27VDWJ.js";import{u as o,R as u,M as p}from"./events-finance-page-DWyC3OLf.js";import{A as v,b as N}from"./messaging-page-BEU6nUaR.js";import{a1 as g,l as x,B as f,C as y,e as b,I as k,S as w,j as B,k as j,m as C,n as A,a as G,b as T,o as F,p as D,q as O,r as P,s as R,t as Y,f as q}from"./beneficiaries-page-CkZlrYV8.js";import{m as E}from"./motion-vendor-iBxafAnt.js";import"./ui-vendor-f6_gbUtQ.js";import"./utils-vendor-CH-VcvGo.js";import"./appwrite-vendor-Ct7vfU_L.js";export{e as BursApplicationsPage,e as default};
