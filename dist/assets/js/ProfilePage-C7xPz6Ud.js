function e({className:e,orientation:a="horizontal",decorative:l=!0,...t}){return i.jsx(s,{"data-slot":"separator-root",decorative:l,orientation:a,className:x("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...t})}function a(){const{user:a,isAuthenticated:s,updateProfile:x}=b(),[q,J]=l.useState(!1),[Q,W]=l.useState(!1),[X,Z]=l.useState({}),[ee,ae]=l.useState({firstName:"",lastName:"",email:"",phone:"",title:"",department:"",location:"",joinDate:"",bio:"",avatar:"",showEmail:!1,showPhone:!1,allowContact:!0}),[ie,se]=l.useState({emailNotifications:!0,pushNotifications:!0,smsNotifications:!1,weeklyReports:!0,systemAlerts:!0,newDonations:!0,newMembers:!1,systemUpdates:!0}),[le,te]=l.useState({profileVisibility:"internal",showEmail:!1,showPhone:!1,allowContact:!0});return l.useEffect(()=>{if(a&&s){const e=a.metadata||{},i="string"==typeof e.name?e.name:a.name,s=a.email?.split("@")[0],l=i??s??"",{firstName:t,lastName:r}=(e=>{const a=e.trim();if(!a)return{firstName:"",lastName:""};const i=a.split(" ");return{firstName:i[0]??"",lastName:i.slice(1).join(" ")}})(l);ae({firstName:t,lastName:r,email:a.email??"",phone:("string"==typeof e.phone?e.phone:"")||"",title:"string"==typeof e.title&&e.title?e.title:"Kullanıcı",department:"string"==typeof e.department&&e.department?e.department:"Genel",location:"string"==typeof e.location&&e.location?e.location:"",joinDate:a.created_at?new Date(a.created_at).toLocaleDateString("tr-TR"):"",bio:"string"==typeof e.bio&&e.bio?e.bio:"",avatar:"string"==typeof e.avatar_url&&e.avatar_url?e.avatar_url:"",showEmail:!1,showPhone:!1,allowContact:!0}),e.notificationSettings&&se({...ie,...e.notificationSettings}),e.privacySettings&&te({...le,...e.privacySettings})}},[a,s]),i.jsx(v,{title:"Profil Ayarları",subtitle:"Hesap bilgilerinizi ve tercihlerinizi yönetin",actions:i.jsx(V,{primaryAction:q?{label:"Kaydet",icon:i.jsx(f,{className:"w-4 h-4"}),onClick:()=>{(async()=>{if(!(()=>{const e={};var a,i;return ee.firstName.trim()||(e.firstName="Ad gereklidir"),ee.lastName.trim()||(e.lastName="Soyad gereklidir"),a=ee.email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)||(e.email="Geçerli bir e-posta adresi giriniz"),i=ee.phone,/^\+?[1-9]\d{1,14}$/.test(i.replace(/\s/g,""))||(e.phone="Geçerli bir telefon numarası giriniz"),Z(e),0===Object.keys(e).length})())return g.error("Lütfen form hatalarını düzeltin"),void 0;W(!0);try{const e=await T.updateUser(a.id,{name:`${ee.firstName} ${ee.lastName}`,email:ee.email,phone:ee.phone});await x({name:e.name,email:e.email,metadata:{...a.metadata,phone:ee.phone,title:ee.title,department:ee.department,location:ee.location,bio:ee.bio,avatar_url:ee.avatar}}),J(!1),g.success("Profil bilgileri başarıyla güncellendi",{duration:3e3})}catch(e){O.error("Failed to update profile",e),g.error("Profil güncellenirken bir hata oluştu")}finally{W(!1)}})()}}:{label:"Düzenle",icon:i.jsx(N,{className:"w-4 h-4"}),onClick:()=>{J(!0)}},secondaryActions:q?[{label:"İptal",onClick:()=>{J(!1)},variant:"outline"}]:[]}),children:i.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[i.jsx(w,{className:"border border-gray-200 shadow-md dark:border-gray-700 dark:bg-gray-900",children:i.jsx(k,{className:"p-6",children:i.jsxs("div",{className:"flex items-start gap-6",children:[i.jsxs("div",{className:"relative flex-shrink-0",children:[i.jsxs(R,{className:"w-24 h-24",children:[i.jsx(Y,{src:ee.avatar,alt:"Profile"}),i.jsxs(H,{className:"bg-blue-600 text-white text-xl",children:[ee.firstName[0],ee.lastName[0]]})]}),q&&i.jsx(C,{size:"sm",className:"absolute -bottom-2 -right-2 rounded-full w-8 h-8 p-0",onClick:()=>{document.getElementById("avatar-input")?.click()},children:i.jsx(t,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex-1 text-center sm:text-left w-full",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 mb-3",children:[i.jsxs("h2",{className:"text-xl sm:text-2xl font-bold",children:[ee.firstName," ",ee.lastName]}),i.jsxs(j,{className:"bg-green-100 text-green-800 mx-auto sm:mx-0 w-fit",children:[i.jsx(r,{className:"w-3 h-3 mr-1"}),"Aktif"]})]}),i.jsxs("p",{className:"text-muted-foreground mb-4 text-sm sm:text-base",children:[ee.title," • ",ee.department]}),i.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-1 lg:grid-cols-3 sm:gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 p-2 sm:p-0 bg-gray-50 sm:bg-transparent rounded-lg",children:[i.jsx(n,{className:"w-4 h-4 text-blue-500 flex-shrink-0"}),i.jsx("span",{className:"truncate",children:ee.email})]}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 p-2 sm:p-0 bg-gray-50 sm:bg-transparent rounded-lg",children:[i.jsx(c,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),i.jsx("span",{children:ee.phone})]}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 p-2 sm:p-0 bg-gray-50 sm:bg-transparent rounded-lg",children:[i.jsx(d,{className:"w-4 h-4 text-purple-500 flex-shrink-0"}),i.jsxs("span",{className:"text-xs sm:text-sm",children:[i.jsx("span",{className:"sm:hidden",children:"Başlangıç: "}),i.jsx("span",{className:"hidden sm:inline",children:"Başlangıç: "}),ee.joinDate?new Date(ee.joinDate).toLocaleDateString("tr-TR"):"Belirtilmemiş"]})]})]})]})]})})}),i.jsxs(U,{defaultValue:"personal",className:"space-y-4 sm:space-y-6",children:[i.jsxs(I,{className:"grid w-full grid-cols-1 sm:grid-cols-3 h-auto sm:h-10",children:[i.jsxs(L,{value:"personal",className:"min-h-[44px] text-sm sm:text-base px-3 sm:px-4",children:[i.jsx(m,{className:"w-4 h-4 mr-1 sm:mr-2 sm:hidden"}),"Kişisel Bilgiler"]}),i.jsxs(L,{value:"notifications",className:"min-h-[44px] text-sm sm:text-base px-3 sm:px-4",children:[i.jsx(o,{className:"w-4 h-4 mr-1 sm:mr-2 sm:hidden"}),"Bildirimler"]}),i.jsxs(L,{value:"privacy",className:"min-h-[44px] text-sm sm:text-base px-3 sm:px-4",children:[i.jsx(h,{className:"w-4 h-4 mr-1 sm:mr-2 sm:hidden"}),"Gizlilik"]})]}),i.jsx(_,{value:"personal",className:"space-y-4 sm:space-y-6",children:i.jsxs(w,{className:"border border-gray-200 shadow-md dark:border-gray-700 dark:bg-gray-900",children:[i.jsx(z,{className:"pb-4",children:i.jsxs(B,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[i.jsx(m,{className:"w-5 h-5 text-blue-600"}),"Kişisel Bilgiler"]})}),i.jsxs(k,{className:"space-y-4 sm:space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(F,{htmlFor:"firstName",children:"Ad"}),i.jsx(G,{id:"firstName",value:ee.firstName,readOnly:!q,onChange:e=>{ae({...ee,firstName:e.target.value}),X.firstName&&Z({...X,firstName:""})},className:"min-h-[44px] text-base "+(X.firstName?"border-red-500":""),inputMode:"text"}),X.firstName&&i.jsx("p",{className:"text-sm text-red-500",children:X.firstName})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(F,{htmlFor:"lastName",children:"Soyad"}),i.jsx(G,{id:"lastName",value:ee.lastName,readOnly:!q,onChange:e=>{ae({...ee,lastName:e.target.value}),X.lastName&&Z({...X,lastName:""})},className:"min-h-[44px] text-base "+(X.lastName?"border-red-500":""),inputMode:"text"}),X.lastName&&i.jsx("p",{className:"text-sm text-red-500",children:X.lastName})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(F,{htmlFor:"email",children:"E-posta"}),i.jsx(G,{id:"email",type:"email",value:ee.email,readOnly:!q,onChange:e=>{ae({...ee,email:e.target.value}),X.email&&Z({...X,email:""})},className:"min-h-[44px] text-base "+(X.email?"border-red-500":""),inputMode:"email"}),X.email&&i.jsx("p",{className:"text-sm text-red-500",children:X.email})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(F,{htmlFor:"phone",children:"Telefon"}),i.jsx(G,{id:"phone",type:"tel",value:ee.phone,readOnly:!q,onChange:e=>{ae({...ee,phone:e.target.value}),X.phone&&Z({...X,phone:""})},className:"min-h-[44px] text-base "+(X.phone?"border-red-500":""),inputMode:"tel"}),X.phone&&i.jsx("p",{className:"text-sm text-red-500",children:X.phone})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(F,{htmlFor:"title",children:"Unvan"}),i.jsx(G,{id:"title",value:ee.title,readOnly:!q,onChange:e=>{ae({...ee,title:e.target.value})},className:"min-h-[44px] text-base",inputMode:"text"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(F,{htmlFor:"department",children:"Departman"}),i.jsxs(S,{value:ee.department,onValueChange:e=>{ae({...ee,department:e})},disabled:!q,children:[i.jsx(K,{className:"min-h-[44px] text-base",children:i.jsx(A,{})}),i.jsxs(D,{children:[i.jsx(P,{value:"Bilgi İşlem",children:"Bilgi İşlem"}),i.jsx(P,{value:"Yönetim",children:"Yönetim"}),i.jsx(P,{value:"Muhasebe",children:"Muhasebe"}),i.jsx(P,{value:"İnsan Kaynakları",children:"İnsan Kaynakları"}),i.jsx(P,{value:"Operasyon",children:"Operasyon"})]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(F,{htmlFor:"bio",children:"Biyografi"}),i.jsx(M,{id:"bio",value:ee.bio,readOnly:!q,onChange:e=>{ae({...ee,bio:e.target.value})},rows:4,placeholder:"Kendiniz hakkında kısa bir açıklama yazın...",className:"min-h-[100px] text-base resize-none"})]})]})]})}),i.jsx(_,{value:"notifications",className:"space-y-6",children:i.jsxs(w,{className:"border border-gray-200 shadow-md dark:border-gray-700 dark:bg-gray-900",children:[i.jsx(z,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(B,{className:"flex items-center gap-2",children:[i.jsx(o,{className:"w-5 h-5 text-blue-600"}),"Bildirim Ayarları"]}),i.jsxs(C,{onClick:()=>{(async()=>{W(!0);try{await E.updatePrefs({...a.metadata,notificationSettings:ie}),await x({metadata:{...a.metadata,notificationSettings:ie}}),g.success("Bildirim ayarları kaydedildi",{duration:2e3})}catch(e){O.error("Failed to save notification settings",e),g.error("Bildirim ayarları güncellenirken bir hata oluştu")}finally{W(!1)}})()},size:"sm",disabled:Q,children:[Q?i.jsx(p,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(f,{className:"w-4 h-4 mr-2"}),Q?"Kaydediliyor...":"Kaydet"]})]})}),i.jsxs(k,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Genel Bildirimler"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(F,{htmlFor:"email-notifications",children:"E-posta Bildirimleri"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Önemli güncellemeler e-posta ile gönderilsin"})]}),i.jsx($,{id:"email-notifications",checked:ie.emailNotifications,onCheckedChange:e=>{se({...ie,emailNotifications:e})}})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(F,{htmlFor:"push-notifications",children:"Push Bildirimleri"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Tarayıcı bildirimleri aktif olsun"})]}),i.jsx($,{id:"push-notifications",checked:ie.pushNotifications,onCheckedChange:e=>{se({...ie,pushNotifications:e})}})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(F,{htmlFor:"sms-notifications",children:"SMS Bildirimleri"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Kritik uyarılar SMS ile gönderilsin"})]}),i.jsx($,{id:"sms-notifications",checked:ie.smsNotifications,onCheckedChange:e=>{se({...ie,smsNotifications:e})}})]})]})]}),i.jsx(e,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Sistem Bildirimleri"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(F,{htmlFor:"system-alerts",children:"Sistem Uyarıları"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Sistem hataları ve uyarıları"})]}),i.jsx($,{id:"system-alerts",checked:ie.systemAlerts,onCheckedChange:e=>{se({...ie,systemAlerts:e})}})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(F,{htmlFor:"weekly-reports",children:"Haftalık Raporlar"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Haftalık aktivite özetleri"})]}),i.jsx($,{id:"weekly-reports",checked:ie.weeklyReports,onCheckedChange:e=>{se({...ie,weeklyReports:e})}})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(F,{htmlFor:"new-donations",children:"Yeni Bağışlar"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Yeni bağış geldiğinde bildirim"})]}),i.jsx($,{id:"new-donations",checked:ie.newDonations,onCheckedChange:e=>{se({...ie,newDonations:e})}})]})]})]})]})]})}),i.jsx(_,{value:"privacy",className:"space-y-6",children:i.jsxs(w,{className:"border border-gray-200 shadow-md dark:border-gray-700 dark:bg-gray-900",children:[i.jsx(z,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(B,{className:"flex items-center gap-2",children:[i.jsx(h,{className:"w-5 h-5 text-blue-600"}),"Gizlilik ve Güvenlik"]}),i.jsxs(C,{onClick:()=>{(async()=>{W(!0);try{await E.updatePrefs({...a.metadata,privacySettings:le}),await x({metadata:{...a.metadata,privacySettings:le}}),g.success("Gizlilik ayarları güncellendi",{duration:2e3})}catch(e){O.error("Failed to save privacy settings",e),g.error("Gizlilik ayarları güncellenirken bir hata oluştu")}finally{W(!1)}})()},size:"sm",disabled:Q,children:[Q?i.jsx(p,{className:"w-4 h-4 mr-2 animate-spin"}):i.jsx(f,{className:"w-4 h-4 mr-2"}),Q?"Kaydediliyor...":"Kaydet"]})]})}),i.jsxs(k,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Profil Görünürlüğü"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(F,{htmlFor:"profile-visibility",children:"Kim profilinizi görebilir?"}),i.jsxs(S,{value:le.profileVisibility,onValueChange:e=>{te({...le,profileVisibility:e})},children:[i.jsx(K,{children:i.jsx(A,{})}),i.jsxs(D,{children:[i.jsx(P,{value:"public",children:"Herkes"}),i.jsx(P,{value:"internal",children:"Sadece Dernek Üyeleri"}),i.jsx(P,{value:"private",children:"Sadece Yöneticiler"})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(F,{htmlFor:"show-email",children:"E-posta Adresini Göster"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"E-posta adresiniz profilde görünsün"})]}),i.jsx($,{id:"show-email",checked:le.showEmail,onCheckedChange:e=>{te({...le,showEmail:e})}})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(F,{htmlFor:"show-phone",children:"Telefon Numarasını Göster"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Telefon numaranız profilde görünsün"})]}),i.jsx($,{id:"show-phone",checked:le.showPhone,onCheckedChange:e=>{te({...le,showPhone:e})}})]})]})]}),i.jsx(e,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Güvenlik"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs(C,{variant:"outline",className:"w-full justify-start",onClick:()=>{g.info("Şifre değiştirme sayfasına yönlendiriliyorsunuz...")},disabled:Q,children:[i.jsx(u,{className:"w-4 h-4 mr-2"}),"Şifre Değiştir"]}),i.jsxs(C,{variant:"outline",className:"w-full justify-start",onClick:()=>{g.info("İki faktörlü doğrulama ayarları açılıyor...")},disabled:Q,children:[i.jsx(h,{className:"w-4 h-4 mr-2"}),"İki Faktörlü Doğrulama"]}),i.jsxs(C,{variant:"outline",className:"w-full justify-start",onClick:()=>{g.info("Giriş geçmişi görüntüleniyor...")},disabled:Q,children:[i.jsx(y,{className:"w-4 h-4 mr-2"}),"Giriş Geçmişi"]})]})]})]})]})})]})]})})}import{j as i,c9 as s,r as l,ca as t,bb as r,bB as n,aR as c,a9 as d,bG as m,ae as o,bH as h,L as p,c4 as f,bI as u,E as y,a7 as N}from"./react-vendor-Zi_jsHoK.js";import{t as g}from"./toast-vendor-Ci27VDWJ.js";import{g as x,u as b,Y as v,C as w,e as k,B as C,f as j,a as z,b as B,t as F,I as G,S,j as K,k as A,m as D,n as P,v as M,a4 as E,l as O}from"./beneficiaries-page-CkZlrYV8.js";import{g as T}from"./user-management-page-B6-AaFFc.js";import{A as R,a as Y,b as H}from"./messaging-page-BEU6nUaR.js";import{D as V}from"./events-finance-page-DWyC3OLf.js";import{S as $}from"./switch-C3esbnVh.js";import{T as U,a as I,b as L,c as _}from"./tabs-fYszpb1R.js";import"./ui-vendor-f6_gbUtQ.js";import"./utils-vendor-CH-VcvGo.js";import"./appwrite-vendor-Ct7vfU_L.js";import"./motion-vendor-iBxafAnt.js";export{a as ProfilePage,a as default};
